# sf-diploma-sprint1

## Задача

Опишите инфраструктуру будущего проекта в виде кода с инструкциями по развертке, нужен кластер Kubernetes и служебный сервер (будем называть его srv).

1. Выбираем облачный провайдер и инфраструктуру.
2. Описываем инфраструктуру.
3. Автоматизируем установку.

Нам нужно три сервера:
- два сервера в одном кластере Kubernetes: 1 master и 1 app;
- сервер srv для инструментов мониторинга, логгирования и сборок контейнеров.

Описывать инфраструктуру мы будем, конечно, в Terraform.

Пишем в README.md инструкцию по развертке конфигураций в облаке. Никаких секретов в коде быть не должно.

Надо реализовать возможность установки на сервер всех необходимых нам настроек и пакетов, будь то docker-compose, gitlab-runner или наши публичные ключи для доступа по SSH. Положите код автоматизации в Git-репозиторий.

## Подготовка
1. Создать в YC сервисный аккаунт с ролью **admin**.
2. В cli хостовой машины инициализировать аккаунт: `yc init`.
3. Скачать проект и перейти в него.
4. В cli хостовой машины создать ключ для авторизации в YC через Terraform:
`yc iam key create   --service-account-id <id созданного серв. акк.> --folder-name <имя каталога в YC> --output key.json`

## Запуск
1. Перейти в директорию `cd terraform`
2. Инициировать терраформ `terraform init`
3. Применить `terraform apply`

## Удаление
Если ничего больше не нужно,ю удаляем командой `terraform destroy`